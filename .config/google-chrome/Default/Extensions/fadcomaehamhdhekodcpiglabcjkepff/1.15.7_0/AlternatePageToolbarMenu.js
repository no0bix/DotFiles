!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=93)}({3:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=(e=>{const n=e.replace(/\\/g,"/").split("/");if(n.length<=0)throw new Error("Invalid dirname given.");return n[n.length-1]+".js"})},4:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.R20Module=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(t(3));function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}let a={};n.R20Module=a,a.Base=function(){function e(e){!function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(this,"getAllHooks",e=>window.r20es.hooks),this.filename=(0,o.default)(e),this.isDisposed=!0}var n=e.prototype;return n.installFirstTime=function(){},n.installUpdate=function(){},n.dispose=function(){},n.internalCanInstall=function(){return!!this.getHook().config.enabled&&(!!this.isDisposed||(console.error("Attempted to install module when it's not disposed."),console.table({"Module filename":this.filename}),console.trace(),!1))},n.internalInstallFirstTime=function(){if(this.internalCanInstall()){try{this.installFirstTime()}catch(e){console.error(e)}this.isDisposed=!1}},n.internalInstallUpdate=function(){if(this.internalCanInstall()){try{this.installUpdate()}catch(e){console.error(e)}this.isDisposed=!1}},n.internalDispose=function(){if(console.log(this),this.isDisposed)return console.error("internalDispose called on module that is already disposed!"),console.table({"Module filename":this.filename}),void console.trace();try{this.dispose()}catch(e){console.error(e)}this.isDisposed=!0},n.setConfigValue=function(e,n){const t=this.getHook(),o=this.getHook().config;if(!(e in o))return void console.error(`Tried to set config of key ${e} to value ${n} but key was not found in the config of module id ${t.id}"`);const i=o[e];o[e]=n,t.saveConfig(),o.enabled&&"onSettingChange"in this&&"function"==typeof this.onSettingChange&&this.onSettingChange(e,i,n)},n.getHook=function(){if(!1 in window.r20es)return null;for(const e in window.r20es.hooks){const n=window.r20es.hooks[e];if(n.filename&&n.filename===this.filename)return n}return null},n.toggleEnabledState=function(e){const n=this.getHook(),t=void 0===e||null===e?!n.config.enabled:e;if(n.config.enabled&&t)return;const o=n.config.enabled;n.config.enabled=t,n.saveConfig(),o&&!t?(console.log("disabling"),this.internalDispose()):!o&&t&&(console.log("enabling"),this.internalInstallUpdate())},n.install=function(){if(!("r20esInstalledModuleTable"in window))return;if(!("r20esDisposeTable"in window))return;console.log(`Installing module filename: ${this.filename}`),!(this.filename in window.r20esInstalledModuleTable)?(console.log("First run"),this.internalInstallFirstTime()):(this.filename in window.r20esDisposeTable&&console.error(`DUPLICATE MODULE FOUND: ${this.filename}`),console.log("Calling install update"),this.internalInstallUpdate()),window.r20esDisposeTable[this.filename]=(()=>{this.dispose()}),window.r20esInstalledModuleTable[this.filename]=this,console.log(`DONE! module ID: ${this.filename}`)},e}(),a.SimpleBase=function(e){function n(){return e.apply(this,arguments)||this}r(n,e);var t=n.prototype;return t.installFirstTime=function(){this.setup()},t.installUpdate=function(){this.setup()},t.setup=function(){},n}(a.Base),a.OnAppLoadBase=function(e){function n(n){var t;return(t=e.call(this,n)||this).setup=t.setup.bind(i(i(t))),t}r(n,e);var t=n.prototype;return t.installFirstTime=function(){window.r20es.isLoading?(this.earlySetup(),window.r20es.onAppLoad.addEventListener(this.setup)):(this.earlySetup(),this.setup())},t.earlySetup=function(){},t.setup=function(){},t.installUpdate=function(){this.installFirstTime()},t.dispose=function(){window.r20es.onAppLoad.removeEventListener(this.setup)},n}(a.Base),a.canInstall=(e=>window.r20es&&"canInstallModules"in window.r20es&&window.r20es.canInstallModules),a.getModule=function(e){return"r20esInstalledModuleTable"in window?window.r20esInstalledModuleTable[e]:null},a.getModuleById=function(e){return"r20esInstalledModuleTable"in window?a.getModule(window.r20es.hooks[e].filename):null}},6:function(e,n,t){"use strict";n.__esModule=!0;var o=t(8);n.copy=function(e,n){var t=Object.assign({},e);return n&&(t=Object.assign(t,n)),t};var i=function(e){if("currentTransform"in e)return e.currentTransform;if("getTransform"in e)return e.getTransform();if(e.mozCurrentTransform){var n=e.mozCurrentTransform;return{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}}};n.getTransform=i;n.getRotation=function(e){var n=i(e),t=Math.atan2(n.b,n.a);return t<0&&(t+=2*Math.PI),t};n.findByIdAndRemove=function(e){var n=document.getElementById(e);n&&n.remove()};n.mapObj=function(e,n){return Object.keys(e).reduce(function(t,o){var i=n(e[o],o);return void 0!==i&&null!==i&&t.push(i),t},[])};n.safeCall=function(e){try{e()}catch(e){console.error(e)}};n.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};n.replaceAll=function(e,n,t){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(n),"g"),t)};n.safeParseJson=function(e){try{return JSON.parse(e)}catch(e){alert("File is not a valid JSON file.")}return null};n.readFile=function(e){return new Promise(function(n,t){if(e){var o=new FileReader;o.readAsText(e),o.onload=function(e){n(e.target.result)}}else t("No file given.")})};var r=function(){return chrome||browser};n.getBrowser=r;n.injectScript=function(e){console.log("Injecting "+e);var n=document.createElement("script");n.async=!1,n.src=r().extension.getURL(e),n.onload=function(){n.remove()},document.head.appendChild(n)};n.strIsNullOrEmpty=function(e){return null===e||void 0===e||e.length<=0||e.trim().length<=0};n.createCSSElement=function(e,n){var t=document.createElement("style");return t.innerHTML=e,t.id=n,t};n.getExtUrlFromPage=function(e,n){var t=void 0===n||null===n?1e3:n;return new Promise(function(n,i){try{var r=!1,a=function(){window.removeEventListener("message",s)},l=window.generateUUID(),s=function(e){e.origin===o.Config.appUrl&&e.data.r20esGivesResourceUrl&&e.data.r20esGivesResourceUrl.id===l&&(r=!0,a(),n(e.data.r20esGivesResourceUrl.url))};window.addEventListener("message",s);var u={resource:e,id:l};window.postMessage({r20esWantsResourceUrl:u},o.Config.appUrl),setTimeout(function(){try{r||(a(),i("Timed out after "+t+"ms"))}catch(e){i(e)}},t)}catch(e){i(e)}})}},8:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;let o={};n.Config=o,o.appUrl="https://app.roll20.net",o.websiteFeatureUrlTemplate="https://ssstormy.github.io/roll20-enhancement-suite/features#",o.website="https://ssstormy.github.io/roll20-enhancement-suite/",o.discordInvite="https://discord.gg/pKxxvuM",o.contributeUrl="https://ssstormy.github.io/roll20-enhancement-suite/contribute.html"},93:function(e,n,t){"use strict";(function(e){var o=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();n.__esModule=!0;var i=t(4),r=t(6),a=t(94),l=function(n){function t(){var t=n.call(this,e)||this;return t.overrideHandler=function(e){3===e.which&&(e.stopPropagation(),e.preventDefault(),t.originalTextEditHandler.call(e.target))},t.noContextMenu=function(e){return!1},t}return o(t,n),t.prototype.addStyleAsElement=function(e,n){var t=r.createCSSElement(n,e);document.body.appendChild(t)},t.prototype.onSettingChange=function(e,n,t){this.removeStyle(),this.addStyle()},t.prototype.addStyle=function(){var e=this.getHook().config,n="\n#page-toolbar {\n    "+("right"===e.location?"right: 400px":"left: 128px")+";\n    opacity: "+e.opacity+";\n}\n\n#page-toolbar .handle {\n    "+("right"===e.location?"right: -30px !important; left: unset;":"left: -30px; right: unset !important;")+";\n}\n";this.addStyleAsElement(t.constantSheetId,a),this.addStyleAsElement(t.variableSheetId,n),console.log("adding style")},t.prototype.removeStyle=function(){r.findByIdAndRemove(t.constantSheetId),r.findByIdAndRemove(t.variableSheetId)},t.prototype.updateToolbarTop=function(){var e=document.querySelector("#page-toolbar");e.classList.contains("closed")?e.style.top="-"+e.clientHeight+"px":e.style.top="0"},t.prototype.setup=function(){var e=this,n=$("body").data("events").click;if(n){for(var o=0,i=n;o<i.length;o++){var r=i[o];if(r.selector===t.textChangeSelector){this.originalTextEditHandler=r.handler;break}}this.originalTextEditHandler||console.error("Failed to find page name text change click event")}else console.error("Failed to find 'click' event in the body element.");this.originalTextEditHandler&&($("body").off("click",t.textChangeSelector,this.originalTextEditHandler),$("body").on("mousedown",t.textChangeSelector,this.overrideHandler),$("body").on("contextmenu",t.textChangeSelector,this.noContextMenu),console.log("isntalled new text edit handler"),console.log(this.originalTextEditHandler)),this.addStyle(),this.updateToolbarTop(),setTimeout(function(){e.updateToolbarTop()},1e3)},t.prototype.forEachEvent=function(e,n){for(var t in e)for(var o=0,i=e[t];o<i.length;o++){n(t,i[o].handler)}},t.prototype.dispose=function(){this.removeStyle(),this.updateToolbarTop(),$("body").off("mousedown",t.textChangeSelector,this.overrideHandler),$("body").on("click",t.textChangeSelector,this.originalTextEditHandler),$("body").off("contextmenu",t.textChangeSelector,this.noContextMenu)},t.constantSheetId="r20es-alternative-page-toolbar-menu-constant-sheet",t.variableSheetId="r20es-alternative-page-toolbar-menu-variable-sheet",t.textChangeSelector="#page-toolbar .pages .availablepage span",t}(i.R20Module.OnAppLoadBase);i.R20Module.canInstall()&&(new l).install()}).call(this,"src/modules/AlternatePageToolbarMenu")},94:function(e,n){e.exports="#page-toolbar {\n  right: unset;\n  left: unset;\n  max-width: 486px;\n  max-height: 80%;\n  width: 100%;\n  height: 100%;\n  background-color: #222;\n  border-radius: unset; }\n\n#page-toolbar .pages .availablepage span input {\n  top: 5px;\n  height: 16px;\n  width: 90%; }\n\n#page-toolbar .activepage {\n  background-color: #2f87d1 !important; }\n\n#page-toolbar .pages .availablepage img.pagethumb {\n  width: 32px;\n  height: 32px;\n  order: 0;\n  margin-top: 0;\n  cursor: pointer;\n  box-shadow: unset;\n  max-width: unset;\n  max-height: unset;\n  background-color: unset; }\n\n#page-toolbar .pages .availablepage .duplicate {\n  display: inline;\n  position: relative;\n  order: 1;\n  margin-left: 8px;\n  right: unset;\n  top: unset;\n  cursor: pointer; }\n\n#page-toolbar .pages .availablepage .settings {\n  position: relative;\n  display: inline;\n  order: 2;\n  margin-left: 8px;\n  cursor: pointer;\n  top: unset;\n  left: unset;\n  font-size: 20px;\n  background-color: unset;\n  padding: 0;\n  border-radius: 0; }\n\n#page-toolbar .playerspecificbookmark {\n  position: relative;\n  order: 4;\n  left: 0 !important;\n  top: 0 !important; }\n\n#page-toolbar .playerbookmark.dropping {\n  left: 0;\n  border: none;\n  border: 3px solid yellow; }\n\n#page-toolbar .playerbookmark {\n  position: relative;\n  display: inline;\n  order: 5;\n  left: 0;\n  cursor: pointer;\n  width: 75px;\n  margin-left: 8px;\n  height: 30px;\n  box-sizing: border-box; }\n\n#page-toolbar .playerbookmark img {\n  transform: rotate(90deg) translateY(-15px) translateX(-25px); }\n\n#page-toolbar .pages .availablepage {\n  width: 100%;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  text-align: unset;\n  margin-right: unset;\n  margin-top: unset;\n  position: unset;\n  cursor: unset;\n  vertical-align: unset; }\n\n#page-toolbar .pages .availablepage:nth-child(even) {\n  background-color: #333; }\n\n#page-toolbar .pages .availablepage span {\n  position: relative;\n  display: inline;\n  max-width: unset;\n  width: auto;\n  flex: 10;\n  order: 3;\n  margin-left: 8px;\n  font-size: 1.1em;\n  white-space: pre;\n  text-align: unset;\n  bottom: unset;\n  cursor: pointer;\n  min-width: 20px;\n  min-height: 20px; }\n\ndiv#page-toolbar:not(.closed) > div.handle.showtip {\n  top: -3px;\n  bottom: unset !important; }\n\n#page-toolbar .activepage img.pagethumb {\n  border: none; }\n\n#page-toolbar .availablepage:hover {\n  background-color: rgba(47, 135, 209, 0.2) !important; }\n\n#page-toolbar .pages div.availablepage:hover img.pagethumb {\n  filter: contrast(120%);\n  box-shadow: unset; }\n\n#page-toolbar .ui-sortable {\n  display: flex !important;\n  flex-direction: column;\n  height: auto;\n  width: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding-bottom: 32px; }\n\n#page-toolbar .container {\n  width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  padding: 0;\n  margin: 0;\n  white-space: unset; }\n"}});