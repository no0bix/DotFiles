!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=121)}({10:function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),o=n(6),i=function(){function e(e,t,n){var o=this;this.success=!1,this.getRoot=function(){return o._root},this.getId=function(){return o._id},this.isSuccessful=function(){return o.success},this.setData=function(e){return o.returnData=e},window.r20esDialogId="r20esDialogId"in window?window.r20esDialogId:0,this.centerWorkaround=null!==n&&void 0!==n&&n,this._id="r20es-dialog-"+window.r20esDialogId++,this._root=r.DOM.createElement("dialog",{className:e,style:t,id:this.getId()}),document.body.insertBefore(this.getRoot(),document.body.firstElementChild),window.dialogPolyfill&&window.dialogPolyfill.registerDialog(this.getRoot()),this.close=this.close.bind(this),this.dispose=this.dispose.bind(this)}return e.prototype.internalRender=function(){var e=this;this.getRoot().appendChild(this.render()),window.dialogPolyfill&&window.dialogPolyfill.reposition(this.getRoot()),this.centerWorkaround&&setTimeout(function(){e.recenter()},100)},e.prototype.recenter=function(){var e=this.getRoot(),t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},e.prototype.rerender=function(){o.removeAllChildren(this.getRoot()),this.internalRender()},e.prototype.internalShow=function(){o.removeAllChildren(this.getRoot()),this.success=!1,this.internalRender(),this.getRoot().showModal()},e.prototype.getData=function(){var e=this.returnData;return this.returnData=null,e},e.prototype.close=function(e){void 0===e&&(e=!1),this.success="boolean"==typeof e&&e,this.getRoot().open&&this.getRoot().close()},e.prototype.dispose=function(){this.close(),o.findByIdAndRemove(this.getId())},e}();t.DialogBase=i},11:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(2),i=n(6),a=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.show=i.internalShow,i.render=function(){return o.DOM.createElement(s,null,o.DOM.createElement(c,null,o.DOM.createElement("h3",null,i.action,", please wait...")))},i.action=t,i}return r(t,e),t}(n(10).DialogBase);function c(e){return o.DOM.createElement("div",{className:"dialog-body"})}function s(e){return o.DOM.createElement("div",{className:"r20es-dialog"})}t.LoadingDialog=a,t.DialogHeader=function(e){return o.DOM.createElement("div",{className:"dialog-header"})},t.DialogBody=c,t.DialogFooter=function(e){return o.DOM.createElement("div",{className:"dialog-footer"},o.DOM.createElement("hr",null))},t.DialogFooterContent=function(e){return o.DOM.createElement("div",{className:"dialog-footer-content"})},t.Dialog=s,t.CheckboxWithText=function(e){var t=i.copy(e,{style:{verticalAlign:"middle",marginRight:"4px"},type:"checkbox"}),n=o.DOM.createElement("input",t),r=t&&t.component||"div";return o.DOM.createElement(r,null,n,o.DOM.createElement("span",{style:{verticalAlign:"middle"}},t.checkboxText))}},12:function(e,t,n){"use strict";t.__esModule=!0;var r=n(13),o=function(){var e=r.default();return"chrome"===e.name||"opera"===e.name};t.isChromium=o;t.doesBrowserNotSupportResponseFiltering=function(){var e=r.default();return console.log(e),!!o()||"firefox"===e.name&&e.versionNumber<57}},121:function(e,t,n){"use strict";(function(e){var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(4),i=n(2),a=n(5),c=n(11),s=n(22),l=n(6),u=n(122),d=n(123),f=n(124),p=n(125),h=n(126),g=n(73),m=n(90),v=n(127),b=function(t){function n(){var n=t.call(this,e)||this;n.generators={},n.setIsTokenAction=!0,n.sortLex=!0,n.folderingMethod=m.FolderingMethod.NoFolder,n.categoryFilter={},n.byNameMacroTable={},n.macroBuffer=[],n.modifiedMacros=[],n.addedMacros=[],n.onPickerDialogClose=function(e){if(e.stopPropagation(),n.pickerDialog.isSuccessful()&&n.activePc){var t=[],r=function(e){return void 0===e&&(e=""),"/w @{character_name} @{wtype} &{template:default}{{name=@{character_name} "+e+"}}"},o=function(e){return e.categoryNameModifier?e.categoryNameModifier(e.name):e.name},i=r(),a=0;for(var c in n.activeGenerator.macroFactories)if(n.categoryFilter[c]){var s=n.activeGenerator.macroFactories[c],u=n.folderingMethod===m.FolderingMethod.SmallFolders,d=n.folderingMethod===m.FolderingMethod.UberFolder;if((u||d)&&s.createFolderEntries){var f=s.createFolderEntries(n.activePc);if(f.length<=0)continue;switch(n.folderingMethod){case m.FolderingMethod.NoFolder:break;case m.FolderingMethod.SmallFolders:for(var p=r(o(s)),h=0,b=f;h<b.length;h++){p+="{{"+b[h]+"}}"}t.push({name:s.name,macro:p});break;case m.FolderingMethod.UberFolder:a+=f.length;p="";for(var w=0,y=f;w<y.length;w++){p+=y[w]}i+="{{• "+o(s)+"="+p+"}}";break;default:v.exhaustTypeSafe(n.folderingMethod)}}else{var _=s.create(n.activePc);t=t.concat(_)}}a>0&&t.push({name:"Uber-Folder",macro:i});for(var M=0,D=t;M<D.length;M++){(T=D[M]).name=l.replaceAll(T.name," ","-")}n.sortLex&&t.sort(function(e,t){return g.default(e,t,function(e){return e.name})});for(var k=0,O=t;k<O.length;k++){var T;(T=O[k]).name in n.byNameMacroTable||(n.byNameMacroTable[T.name]=[]),n.byNameMacroTable[T.name].push(T)}var E=!1;for(var C in n.byNameMacroTable)if(n.byNameMacroTable[C].length>1){E=!0;break}E?n.dupeDialog.show(n.byNameMacroTable,function(e){return e.macro}):(n.macroBuffer=t,n.showVerify())}},n.onVerifyDialogClose=function(e){e.stopPropagation(),n.verifyDialog.isSuccessful()&&n.generateMacros()},n.onButtonClick=function(e){e.stopPropagation();var t=$(e.target).closest("[data-characterid]")[0];if(t){var r=t.getAttribute("data-characterid"),o=a.R20.getCharacter(r);o?(n.activePc=o,n.activeGenerator=null,n.categoryFilter={},n.byNameMacroTable={},n.macroBuffer=[],n.modifiedMacros=[],n.addedMacros=[],n.pickerDialog.show()):console.error('Failed to get character for macro generation: getCharacter("'+r+'") failed.')}else console.error("Failed to find character id for macro generation")},n.renderSheet=function(){return i.DOM.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},i.DOM.createElement("button",{style:{width:"50%",height:"30px",display:"flex",justifyContent:"center"},className:"btn",onClick:n.onButtonClick},"Open Generate Macros Dialog"))},n.onDupeDialogClose=function(e){if(e.stopPropagation(),n.dupeDialog.isSuccessful()){var t=n.dupeDialog.getData();for(var r in n.byNameMacroTable){var o=n.byNameMacroTable[r],i=t[r];n.macroBuffer.push(o[i])}n.showVerify()}};return function(e){n.generators[e.id]=e}(u.default),n}return r(n,t),n.prototype.showVerify=function(){var e=this,t=this.activePc.abilities.models.reduce(function(e,t){return e[t.get("name")]=t,e},{});this.macroBuffer.forEach(function(n){if(n.name in t){var r=t[n.name].get("action");if(r===n.macro)return;e.modifiedMacros.push({name:n.name,macro:n.macro,oldMacro:r})}else e.addedMacros.push(n)}),this.modifiedMacros.length<=0&&this.addedMacros.length<=0?this.noMacrosDialog.show():this.verifyDialog.show(this.modifiedMacros,this.addedMacros)},n.prototype.generateMacros=function(){var e=this,t=this.activePc;if(t){var n=new c.LoadingDialog("Generating");n.show(),setTimeout(function(){try{for(var r=function(n){var r=t.abilities.find(function(e){return e.get("name")===n.name});if(!r)return console.error("Tried to modify existing ability but could not find it."),console.table({Query:n.name,Macro:n.macro,"Char Name":t.get("name"),"Char UUID":t.get("id")}),e.addedMacros.push(n),"continue";r.save({action:n.macro,istokenaction:e.setIsTokenAction})},o=0,i=e.modifiedMacros;o<i.length;o++){r(s=i[o])}for(var a=0,c=e.addedMacros;a<c.length;a++){var s=c[a];t.abilities.create({name:s.name,action:s.macro,istokenaction:e.setIsTokenAction})}t.view.render()}catch(e){console.error(e)}n.dispose()},100)}},n.prototype.setup=function(){this.pickerDialog=new d.default(this),this.pickerDialog.getRoot().addEventListener("close",this.onPickerDialogClose),this.verifyDialog=new p.default,this.verifyDialog.getRoot().addEventListener("close",this.onVerifyDialogClose),this.dupeDialog=new f.default,this.dupeDialog.getRoot().addEventListener("close",this.onDupeDialogClose),this.noMacrosDialog=new h.default,this.sheetTab=s.SheetTab.add("Macro Generator",this.renderSheet,null,a.R20.canEditCharacter)},n.prototype.dispose=function(){this.sheetTab&&this.sheetTab.dispose(),this.pickerDialog&&this.pickerDialog.dispose(),this.verifyDialog&&this.verifyDialog.dispose(),this.dupeDialog&&this.dupeDialog.dispose(),this.noMacrosDialog&&this.noMacrosDialog.dispose()},n}(o.R20Module.SimpleBase);o.R20Module.canInstall()&&(new b).install(),t.default=b}).call(this,"src/modules/MacroGenerator")},122:function(e,t,n){"use strict";t.__esModule=!0;for(var r=n(73),o={"NPC Actions":{group:"repeating_npcaction",name:"name",macro:function(e){return"selected|repeating_npcaction_$"+e+"_npc_action"},canMakeFolder:!0},"NPC Legendary Actions":{group:"repeating_npcaction-l",name:"name",macro:function(e){return"selected|repeating_npcaction-l_$"+e+"_npc_action"},canMakeFolder:!0},"NPC Traits":{group:"repeating_npctrait",name:"name",macro:function(e){return"@{selected|wtype}&{template:npcaction} {{name=@{selected|npc_name}}} {{rname=@{selected|repeating_npctrait_$"+e+"_name}}} {{description=@{selected|repeating_npctrait_$"+e+"_desc}}}"},canMakeFolder:!1},"NPC Reactions":{group:"repeating_npcreaction",name:"name",macro:function(e){return"@{selected|wtype}&{template:npcaction} {{name=@{selected|npc_name}}} {{rname=@{selected|repeating_npcreaction_$"+e+"_name}}} {{description=@{selected|repeating_npcreaction_$"+e+"_desc}}}"},nameMod:function(e){return"Reaction:"+e},canMakeFolder:!1},"Player Attacks":{group:"repeating_attack",name:"atkname",macro:function(e){return"selected|repeating_attack_$"+e+"_attack"},canMakeFolder:!0},"Player Tools":{group:"repeating_tool",name:"toolname",macro:function(e){return"selected|repeating_tool_$"+e+"_tool"},canMakeFolder:!0},"Player Traits":{group:"repeating_traits",name:"name",macro:function(e){return"@{selected|wtype}&{template:traits} @{selected|charname_output} {{name=@{selected|repeating_traits_$"+e+"_name}}} {{source=@{selected|repeating_traits_$"+e+"_source}: @{selected|repeating_traits_$"+e+"_source_type}}} {{description=@{selected|repeating_traits_$"+e+"_description}}}"},canMakeFolder:!1},"Spellbook Cantrips":{group:"repeating_spell-cantrip",name:"spellname",macro:function(e){return"selected|repeating_spell-cantrip_$"+e+"_spell"},canMakeFolder:!0}},i=function(e){o["Spellbook Level "+e]={group:"repeating_spell-"+e,name:"spellname",macro:function(t){return"selected|repeating_spell-"+e+"_$"+t+"_spell"},canMakeFolder:!0,categoryMod:function(t){return t+" (@{Selected|lvl"+e+"_slots_expended}/@{Selected|lvl"+e+"_slots_total})"}}},a=1;a<=9;a++)i(a);var c=function(e,t,n,r){var o=t+"_"+n+"_"+r,i=e.attribs.models.find(function(e){return e.get("name")===o});return i?i.attributes.current:(console.error("[Bulk macro generator for 5e OGL R20] Could not find name for repeating section."),void console.table({Query:o,"Group name":t,"Name Attribute Name":r,"Character name":e.get("name"),"Character UUID":e.get("id")}))},s=function(e,t,n,r,o){for(var i=function(e,t){var n={};return e.attribs.models.forEach(function(e){var r=e.get("name");if(r.startsWith(t+"_")){var o=r.split("_");if(!(o.length<2)){var i=o[2];n[i]=!0}}}),e.repeatingKeyOrder(Object.keys(n),t)}(e,t),a=[],s=0;s<i.length;s++){var l=i[s],u=c(e,t,l,n);"function"==typeof o&&(u=o(u)),a.push({name:u||"",macro:r(s)})}return a},l=[],u=function(e){var t=o[e],n=void 0;t.canMakeFolder&&(n=function(e){var n=s(e,t.group,t.name,t.macro,t.nameMod);n.sort(function(e,t){return r.default(e,t,function(e){return e.name})});for(var o=[],i=0,a=n;i<a.length;i++){var c=a[i];o.push("["+c.name+"](~"+c.macro+")")}return o});var i=t.canMakeFolder?function(e){return"%{"+t.macro(e)+"}"}:t.macro;l.push({name:e,create:function(e){return s(e,t.group,t.name,i,t.nameMod)},createFolderEntries:n,categoryNameModifier:t.categoryMod})};for(var d in o)u(d);var f="D&D 5e OGL by Roll20",p={id:f,name:f,macroFactories:l};t.default=p},123:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(10),i=n(11),a=n(2),c=n(12),s=n(90),l=function(e){function t(t){var n=e.call(this,"r20es-big-dialog")||this;return n.show=n.internalShow,n.submit=function(e,t){n.parent.categoryFilter=t.reduce(function(e,t){return e[t.value]=t.checked,e},{}),n.close(!0),e.stopPropagation()},n.onTokenActionChecked=function(e){n.parent.setIsTokenAction=e.target.checked,e.stopPropagation()},n.onSelectChange=function(e){n.parent.activeGenerator=n.parent.generators[e.target.value],n.rerender(),c.isChromium()&&n.recenter(),e.stopPropagation()},n.onToggleAll=function(e){$(n.getRoot()).find("input").each(function(e,t){t.ignoreToggleAll||(t.checked=!t.checked)}),e.stopPropagation()},n.onChangeFolderStatus=function(e){n.parent.folderingMethod=e.target.value},n.parent=t,n}return r(t,e),t.prototype.generateCheckboxes=function(){for(var e=[],t=[],n=0;n<this.parent.activeGenerator.macroFactories.length;n++){var r=this.parent.activeGenerator.macroFactories[n],o=a.DOM.createElement("div",null,a.DOM.createElement("input",{style:{verticalAlign:"middle",marginRight:"4px"},type:"checkbox",value:n,checked:!0}),a.DOM.createElement("span",{style:{verticalAlign:"middle"}},r.name),r.createFolderEntries&&a.DOM.createElement("span",{style:{float:"right",paddingRight:"16px",color:"lightgray"}},"Folderable"));e.push(o),t.push(o.firstElementChild)}return{elems:e,checkboxes:t}},t.prototype.render=function(){var e=this,t=this.parent.activeGenerator?this.generateCheckboxes():{},n=t.elems,r=t.checkboxes,o=[];for(var c in s.FolderingMethod){var l=s.FolderingMethod[c];o.push(a.DOM.createElement("option",{value:l},l))}var u=[];for(var c in this.parent.generators){var d=this.parent.generators[c];u.push(a.DOM.createElement("option",{value:d.id},d.name))}return a.DOM.createElement(i.Dialog,null,a.DOM.createElement(i.DialogHeader,null,a.DOM.createElement("h2",null,"Sheet, category selection.")),a.DOM.createElement(i.DialogBody,null,a.DOM.createElement("select",{value:this.parent.activeGenerator?this.parent.activeGenerator.id:"",onChange:this.onSelectChange},a.DOM.createElement("option",{value:""},"Select a sheet"),u),n&&a.DOM.createElement("div",{style:{paddingLeft:"12px",paddingBottom:"12px"}},a.DOM.createElement("button",{className:"btn",onClick:this.onToggleAll},"Toggle All"),n,a.DOM.createElement("hr",null),a.DOM.createElement("select",{value:this.parent.folderingMethod,onChange:this.onChangeFolderStatus},o),a.DOM.createElement(i.CheckboxWithText,{ignoreToggleAll:!0,checked:this.parent.setIsTokenAction,onChange:this.onTokenActionChecked,checkboxText:"Show as Token Action"}),a.DOM.createElement(i.CheckboxWithText,{ignoreToggleAll:!0,checked:this.parent.sortLex,onChange:function(t){return e.parent.sortLex=t.target.checked},checkboxText:"Sort lexicographically"}))),a.DOM.createElement(i.DialogFooter,null,a.DOM.createElement(i.DialogFooterContent,null,a.DOM.createElement("button",{className:"btn",onClick:this.close},"Close"),a.DOM.createElement("button",{className:"btn btn-primary",style:{float:"right"},disabled:!("elems"in t),onClick:function(t){return e.submit(t,r)}},"OK"))))},t}(o.DialogBase);t.default=l},124:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(10),i=n(11),a=n(2),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedButtons={},t.submit=function(e){e.stopPropagation(),t.setData(t.selectedButtons),t.close(!0)},t.checkboxLogic=function(e){var n=e.getAttribute("data-key"),r=parseInt(e.getAttribute("data-index"));t.selectedButtons[n]=r,t.rerender()},t.checkboxCheck=function(e){return t.checkboxLogic(e.target)},t.onTextClick=function(e){var n=$(e.target).find("input")[0];n&&t.checkboxLogic(n)},t.genDiffs=function(){var e=[],n=function(n){var r=t.dataSet[n];if(r.length<=1)return"continue";var o=[];r.forEach(function(e,r){var i=t.selectedButtons[n]===r,c=a.DOM.createElement("div",{style:{paddingTop:"0px",paddingBottom:"0px"},onClick:t.onTextClick,className:"r20es-code"},a.DOM.createElement("input",{className:"btn",style:{verticalAlign:"middle",marginRight:"4px"},"data-key":n,"data-index":r,onChange:t.checkboxCheck,type:"radio",checked:i}),t.descRetriever(e));o.push(c)}),e.push(a.DOM.createElement("div",null,a.DOM.createElement("h4",null,n),o,a.DOM.createElement("hr",null)))};for(var r in t.dataSet)n(r);return e},t}return r(t,e),t.prototype.show=function(t,n){for(var r in this.dataSet=t,this.selectedButtons={},this.descRetriever=n,this.dataSet)this.selectedButtons[r]=0;e.prototype.internalShow.call(this)},t.prototype.render=function(){return a.DOM.createElement(i.Dialog,null,a.DOM.createElement(i.DialogHeader,null,a.DOM.createElement("h2",null,"Duplicates")),a.DOM.createElement(i.DialogBody,null,a.DOM.createElement("p",null,"Abilities with duplicate names were generated."),a.DOM.createElement("p",null,"Choose which duplicate ability should be kept."),this.genDiffs()),a.DOM.createElement(i.DialogFooter,null,a.DOM.createElement(i.DialogFooterContent,null,a.DOM.createElement("button",{style:{boxSizing:"border-box",width:"100%"},className:"btn",onClick:this.submit},"Done"))))},t}(o.DialogBase);t.default=c},125:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(10),i=n(11),a=n(2),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.submit=function(e){e.stopPropagation(),$(t.getRoot()).find("input").each(function(e,n){if(!n.checked){var r=n.getAttribute("data-name"),o=n.hasAttribute("data-modify"),i=o?t.modifiedMacros:t.addedMacros,a=i.findIndex(function(e){return e.name===r});-1!==a?i.splice(a,1):console.error("Tried to remove macro with name "+r+" but could not find it's index in the pool. isModify: "+o)}}),t.close(!0)},t.onToggleAll=function(e){e.stopPropagation(),$(t.getRoot()).find("input").each(function(e,t){t.checked=!t.checked}),e.stopPropagation()},t}return r(t,e),t.prototype.show=function(t,n){this.addedMacros=n,this.modifiedMacros=t,e.prototype.internalShow.call(this)},t.prototype.mkTable=function(e,t,n){return a.DOM.createElement("div",null,a.DOM.createElement("h3",null,e),a.DOM.createElement("table",{className:"r20es-indent"},a.DOM.createElement("thead",null,a.DOM.createElement("tr",{className:"table-head"},t)),a.DOM.createElement("tbody",null,n)))},t.prototype.generateAdded=function(){return this.mkTable("Macros To Be Added",[a.DOM.createElement("th",{scope:"col"},"Name"),a.DOM.createElement("th",{scope:"col"},"Action")],this.addedMacros.map(function(e){return a.DOM.createElement("tr",null,a.DOM.createElement("th",{scope:"row"},a.DOM.createElement(i.CheckboxWithText,{"data-name":e.name,value:e.macro,checkboxText:e.name,checked:!0})),a.DOM.createElement("td",{className:"r20es-code"},e.macro))}))},t.prototype.generateModified=function(){return this.mkTable("Macros To Be Changed",[a.DOM.createElement("th",{scope:"col"},"Name"),a.DOM.createElement("th",{scope:"col"},"Old Action"),a.DOM.createElement("th",{scope:"col"},"New Action")],this.modifiedMacros.map(function(e){return a.DOM.createElement("tr",null,a.DOM.createElement("th",{scope:"row"},a.DOM.createElement(i.CheckboxWithText,{"data-modify":!0,"data-name":e.name,value:e.macro,checkboxText:e.name,checked:!0})),a.DOM.createElement("td",{className:"r20es-code"},e.oldMacro),a.DOM.createElement("td",{className:"r20es-code"},e.macro))}))},t.prototype.render=function(){return a.DOM.createElement(i.Dialog,null,a.DOM.createElement(i.DialogHeader,null,a.DOM.createElement("h2",null,"Review Changes")),a.DOM.createElement(i.DialogBody,null,a.DOM.createElement("button",{className:"btn",onClick:this.onToggleAll},"Toggle All"),this.addedMacros.length>0&&this.generateAdded(),this.modifiedMacros.length>0&&this.generateModified()),a.DOM.createElement(i.DialogFooter,null,a.DOM.createElement(i.DialogFooterContent,null,a.DOM.createElement("button",{className:"btn",onClick:this.close},"Close"),a.DOM.createElement("button",{className:"btn btn-primary",style:{float:"right"},onClick:this.submit},"OK"))))},t}(o.DialogBase);t.default=c},126:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();t.__esModule=!0;var o=n(10),i=n(2),a=n(11),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show=t.internalShow,t}return r(t,e),t.prototype.render=function(){return i.DOM.createElement(a.Dialog,null,i.DOM.createElement(a.DialogHeader,null,i.DOM.createElement("h2",null,"Notice")),i.DOM.createElement(a.DialogBody,null,i.DOM.createElement("p",null,"We found nothing to make a macro for.")),i.DOM.createElement(a.DialogFooter,null,i.DOM.createElement(a.DialogFooterContent,null,i.DOM.createElement("button",{style:{boxSizing:"border-box",width:"100%"},className:"btn btn-primary",onClick:this.close},"OK"))))},t}(o.DialogBase);t.default=c},127:function(e,t,n){"use strict";t.__esModule=!0,t.exhaustTypeSafe=function(e){throw new Error("BAD: TYPESAFE CASE EXHAUST. tell a programmer")}},13:function(e,t,n){"use strict";n.r(t),function(e){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=[["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["edge",/Edge\/([0-9\._]+)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["safari",/Version\/([0-9\._]+).*Safari/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/]],o=["Windows Phone","Android","CentOS",{name:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},a=new RegExp(["(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|","compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|","midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)","\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|","wap|windows ce|xda|xiino"].join(""),"i"),c=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|","ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|","avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|","cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|","ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|","g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|","hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|","i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|","kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])","|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|","mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|","n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|","op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|","po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|","raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|","se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|k\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|","so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|","tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|","veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|","w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-"].join(""),"i"),s=function(){function e(e,t,n){this.navigator=t,this.process=n,this.userAgent=e||(this.navigator?t.userAgent||t.vendor:"")}return e.prototype.detect=function(){if(this.process&&!this.userAgent){var e=this.process.version.slice(1).split(".").slice(0,3),t=Array.prototype.slice.call(e,1).join("")||"0";return{name:"node",version:e.join("."),versionNumber:parseFloat(e[0]+"."+t),mobile:!1,os:this.process.platform}}return this.userAgent||this.handleMissingError(),n({},this.checkBrowser(),this.checkMobile(),this.checkOs())},e.prototype.checkBrowser=function(){var e=this;return r.filter(function(t){return t[1].test(e.userAgent)}).map(function(t){var n=t[1].exec(e.userAgent),r=n&&n[1].split(/[._]/).slice(0,3),o=Array.prototype.slice.call(r,1).join("")||"0";return r&&r.length<3&&Array.prototype.push.apply(r,1===r.length?[0,0]:[0]),{name:String(t[0]),version:r.join("."),versionNumber:Number(r[0]+"."+o)}}).shift()},e.prototype.checkMobile=function(){var e=this.userAgent.substr(0,4);return{mobile:a.test(this.userAgent)||c.test(e)}},e.prototype.checkOs=function(){var e=this;return o.map(function(t){var n=t.name||t,r=e.getOsPattern(t);return{name:n,pattern:r,value:RegExp("\\b"+r.replace(/([ -])(?!$)/g,"$1?")+"(?:x?[\\d._]+|[ \\w.]*)","i").exec(e.userAgent)}}).filter(function(e){return e.value}).map(function(e){var t,n=e.value[0]||"";return e.pattern&&e.name&&/^Win/i.test(n)&&!/^Windows Phone /i.test(n)&&(t=i[n.replace(/[^\d.]/g,"")])&&(n="Windows "+t),e.pattern&&e.name&&(n=n.replace(RegExp(e.pattern,"i"),e.name)),n=n.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0].trim(),{os:n=/^(?:webOS|i(?:OS|P))/.test(n)?n:n.charAt(0).toUpperCase()+n.slice(1)}}).shift()},e.prototype.getOsPattern=function(e){var t=e;return("string"==typeof e?e:void 0)||t.pattern||t.name},e.prototype.handleMissingError=function(){throw new Error("Please give user-agent.\n> browser(navigator.userAgent or res.headers['user-agent']).")},e}();function l(e,t){return e(t={exports:{}},t.exports),t.exports}var u=l(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),d=l(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),f=(d.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),p=function(e){if(!f(e))throw TypeError(e+" is not an object!");return e},h=function(e){try{return!!e()}catch(e){return!0}},g=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=u.document,v=f(m)&&f(m.createElement),b=!g&&!h(function(){return 7!=Object.defineProperty(function(e){return v?m.createElement(e):{}}("div"),"a",{get:function(){return 7}}).a}),w=Object.defineProperty,y={f:g?Object.defineProperty:function(e,t,n){if(p(e),t=function(e,t){if(!f(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!f(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!f(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!f(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),p(n),b)try{return w(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},_=g?function(e,t,n){return y.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,n))}:function(e,t,n){return e[t]=n,e},M={}.hasOwnProperty,D=function(e,t){return M.call(e,t)},k=0,O=Math.random(),T=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++k+O).toString(36))},E=l(function(e){var t=T("src"),n=Function.toString,r=(""+n).split("toString");d.inspectSource=function(e){return n.call(e)},(e.exports=function(e,n,o,i){var a="function"==typeof o;a&&(D(o,"name")||_(o,"name",n)),e[n]!==o&&(a&&(D(o,t)||_(o,t,e[n]?""+e[n]:r.join(String(n)))),e===u?e[n]=o:i?e[n]?e[n]=o:_(e,n,o):(delete e[n],_(e,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||n.call(this)})}),C=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},S=function(e,t,n){var r,o,i,a,c=e&S.F,s=e&S.G,l=e&S.S,f=e&S.P,p=e&S.B,h=s?u:l?u[t]||(u[t]={}):(u[t]||{}).prototype,g=s?d:d[t]||(d[t]={}),m=g.prototype||(g.prototype={});for(r in s&&(n=t),n)i=((o=!c&&h&&void 0!==h[r])?h:n)[r],a=p&&o?C(i,u):f&&"function"==typeof i?C(Function.call,i):i,h&&E(h,r,i,e&S.U),g[r]!=i&&_(g,r,a),f&&m[r]!=i&&(m[r]=i)};u.core=d,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var x=S,A={}.toString,P=function(e){return A.call(e).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==P(e)?e.split(""):Object(e)},I=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},R=Math.ceil,N=Math.floor,j=Math.min,B=function(e){return e>0?j(function(e){return isNaN(e=+e)?0:(e>0?N:R)(e)}(e),9007199254740991):0},L=Array.isArray||function(e){return"Array"==P(e)},U=l(function(e){var t=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:d.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),$=l(function(e){var t=U("wks"),n=u.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:T)("Symbol."+e))}).store=t})("species"),G=function(e,t){return new(function(e){var t;return L(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!L(t.prototype)||(t=void 0),f(t)&&null===(t=t[$])&&(t=void 0)),void 0===t?Array:t}(e))(t)},W=function(e,t){var n=1==e,r=2==e,o=3==e,i=4==e,a=6==e,c=5==e||a,s=t||G;return function(t,l,u){for(var d,f,p=function(e){return Object(I(e))}(t),h=F(p),g=C(l,u,3),m=B(h.length),v=0,b=n?s(t,m):r?s(t,0):void 0;m>v;v++)if((c||v in h)&&(f=g(d=h[v],v,p),e))if(n)b[v]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:b.push(d)}else if(i)return!1;return a?-1:o||i?i:b}},H=function(e,t){return!!e&&h(function(){t?e.call(null,function(){},1):e.call(null)})},J=W(2);x(x.P+x.F*!H([].filter,!0),"Array",{filter:function(e){return J(this,e,arguments[1])}});d.Array.filter;var z=W(1);x(x.P+x.F*!H([].map,!0),"Array",{map:function(e){return z(this,e,arguments[1])}});d.Array.map;var V="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",X="["+V+"]",q=RegExp("^"+X+X+"*"),K=RegExp(X+X+"*$"),Z=function(e,t,n){var r={},o=h(function(){return!!V[e]()||"​"!="​"[e]()}),i=r[e]=o?t(Y):V[e];n&&(r[n]=i),x(x.P+x.F*o,"String",r)},Y=Z.trim=function(e,t){return e=String(I(e)),1&t&&(e=e.replace(q,"")),2&t&&(e=e.replace(K,"")),e};Z("trim",function(e){return function(){return e(this,3)}});d.String.trim;var Q="undefined"!=typeof window?window.navigator:void 0,ee=void 0!==e?e:void 0;t.default=function(e){return new s(e,Q,ee).detect()}}.call(this,n(14))},14:function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,l=[],u=!1,d=-1;function f(){u&&s&&(u=!1,s.length?l=s.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=c(f);u=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},2:function(e,t,n){"use strict";var r,o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};t.__esModule=!0,function(e){e.rerender=function(e,t){var n=e.nextSibling,r=e.parentNode;e.remove();var o=t();return n?r.insertBefore(o,n):r.appendChild(o),o},e.createElement=function(t,n){for(var r,a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];var s=null,l="function"==typeof t;l&&t.name&&t.prototype instanceof e.ElementBase?s=new t(n).render():s=l?t(n):document.createElement(t);if(!(s instanceof HTMLElement))return console.error($(i||(i=o(["JSX Render must return a valid element: elem is not an instance of HTMLElement"],["JSX Render must return a valid element: elem is not an instance of HTMLElement"])))),console.table(((r={})['"type" argument']=t,r.Type=typeof s,r.Value=s,r)),console.trace(),null;if(a){var u=document.createDocumentFragment(),d=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r instanceof HTMLElement)u.appendChild(r);else if(Array.isArray(r))d(r);else if("number"==typeof r)u.appendChild(document.createTextNode(r.toString()));else if("string"==typeof r)u.appendChild(document.createTextNode(r));else if(null===r||void 0===r||"boolean"==typeof r)console.log("JSX got an unrenderable child value, assuming it's control flow related: type: "+typeof r+" value: "+r+".");else{var o=[];for(var i in r)o.push(r[i]);d(o)}}};d(a),s.appendChild(u)}var f=function(e){return e.startsWith("on")},p=function(e){return e.substring(2).toLowerCase()};for(var h in n){var g=n[h];if(f(h))s.addEventListener(p(h),g);else if("className"===h)if(g&&Array.isArray(g))for(var m=0,v=g;m<v.length;m++){var b=v[m];!b||b.length<=0||s.classList.add(b)}else"string"==typeof g&&g.length>0&&(s.className=s.className&&s.classList.length>0?s.className+" "+g:g);else if("style"===h)if("string"==typeof g)s.style.cssText=g;else if("object"==typeof g)for(var w in g)g&&(s.style[w]=g[w]);else void 0!==g&&console.error("Unknown style attribute type: "+typeof g+", "+g);else h.startsWith("data")?s.setAttribute(h,g):s[h]=g}return s};var t=function(){return function(){var t=this;this.elementRoot=null,this.render=function(){var e=t.internalRender();return t.setRoot(e),e},this.rerender=function(){return e.rerender(t.getRoot(),function(){return t.render()})},this.setRoot=function(e){return t.elementRoot=e},this.getRoot=function(){return t.elementRoot},this.dispose=function(){t.getRoot().remove()}}}();e.ElementBase=t}(r||(r={})),t.DOM=r;t.SidebarSeparator=function(e){var t=e&&e.big;return r.createElement("div",null,t&&r.createElement("div",{className:"clear",style:{height:t}}),r.createElement("hr",null),t&&r.createElement("div",{className:"clear",style:{height:t}}))};var i;t.SidebarCategoryTitle=function(e){return r.createElement("h3",{style:{marginBottom:"5px",marginLeft:"5px"}})}},22:function(e,t,n){"use strict";t.__esModule=!0;var r=n(5),o=n(2),i=function(){function e(){this.tabs=[],this.tabsById={},this.idTop=0,this.rescanFunc=void 0}return e.prototype.addTab=function(e){this.tabs.push(e),this.tabsById[e.id]=e},e.prototype.removeTab=function(e){delete this.tabsById[e.id];for(var t=this.tabs.length;t-- >0;){this.tabs[t].id===e.id&&this.tabs.splice(t,1)}},e}();t.InternalSheetTabData=i;var a=function(){function e(e,t){this.parent=e,this.characterId=t}return e.prototype.rerender=function(){var e=this;this.root=o.DOM.rerender(this.root,function(){return e.parent.renderFx(e)})},e.prototype.tryGetPc=function(){if(!this.contentRoot)return null;console.log(this.contentRoot);var e=null;if(this.contentRoot.hasAttribute("data-characterid"))e=this.contentRoot;else{var t=$(this.contentRoot).closest("div[data-characterid]");if(!t)return null;e=t[0]}if(!e)return null;var n=e.getAttribute("data-characterid");if(!n)return null;var o=r.R20.getCharacter(n);return o||null},e}();t.SheetTabSheetInstanceData=a;var c=function(){function e(e,t,n,r){this.byIdSheetData={},this._elements=[],this.name=e,this.renderFx=t,this.id=n,this._contentRoot=null,this.onShow=r}return e.prototype.getInstanceData=function(e){return e in this.byIdSheetData||(this.byIdSheetData[e]=new a(this,e)),this.byIdSheetData[e]},e.prototype._addElem=function(e){this._elements.push(e)},e._getInternalData=function(){return"sheetTabData"in window.r20es||(window.r20es.sheetTabData=new i),window.r20es.sheetTabData},e.add=function(t,n,r,o){var i=e._getInternalData(),a=new e(t,n,"r20es-character-sheet-tab-"+i.idTop++,r);return a.predicate=o,i.addTab(a),"function"==typeof i.rescanFunc&&i.rescanFunc(),a},e.prototype.dispose=function(){this._elements.forEach(function(e){return e.remove()}),this._elements=[],e._getInternalData().removeTab(this)},e}();t.SheetTab=c},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=(e=>{const t=e.replace(/\\/g,"/").split("/");if(t.length<=0)throw new Error("Invalid dirname given.");return t[t.length-1]+".js"})},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.R20Module=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(3));function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}let a={};t.R20Module=a,a.Base=function(){function e(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"getAllHooks",e=>window.r20es.hooks),this.filename=(0,r.default)(e),this.isDisposed=!0}var t=e.prototype;return t.installFirstTime=function(){},t.installUpdate=function(){},t.dispose=function(){},t.internalCanInstall=function(){return!!this.getHook().config.enabled&&(!!this.isDisposed||(console.error("Attempted to install module when it's not disposed."),console.table({"Module filename":this.filename}),console.trace(),!1))},t.internalInstallFirstTime=function(){if(this.internalCanInstall()){try{this.installFirstTime()}catch(e){console.error(e)}this.isDisposed=!1}},t.internalInstallUpdate=function(){if(this.internalCanInstall()){try{this.installUpdate()}catch(e){console.error(e)}this.isDisposed=!1}},t.internalDispose=function(){if(console.log(this),this.isDisposed)return console.error("internalDispose called on module that is already disposed!"),console.table({"Module filename":this.filename}),void console.trace();try{this.dispose()}catch(e){console.error(e)}this.isDisposed=!0},t.setConfigValue=function(e,t){const n=this.getHook(),r=this.getHook().config;if(!(e in r))return void console.error(`Tried to set config of key ${e} to value ${t} but key was not found in the config of module id ${n.id}"`);const o=r[e];r[e]=t,n.saveConfig(),r.enabled&&"onSettingChange"in this&&"function"==typeof this.onSettingChange&&this.onSettingChange(e,o,t)},t.getHook=function(){if(!1 in window.r20es)return null;for(const e in window.r20es.hooks){const t=window.r20es.hooks[e];if(t.filename&&t.filename===this.filename)return t}return null},t.toggleEnabledState=function(e){const t=this.getHook(),n=void 0===e||null===e?!t.config.enabled:e;if(t.config.enabled&&n)return;const r=t.config.enabled;t.config.enabled=n,t.saveConfig(),r&&!n?(console.log("disabling"),this.internalDispose()):!r&&n&&(console.log("enabling"),this.internalInstallUpdate())},t.install=function(){if(!("r20esInstalledModuleTable"in window))return;if(!("r20esDisposeTable"in window))return;console.log(`Installing module filename: ${this.filename}`),!(this.filename in window.r20esInstalledModuleTable)?(console.log("First run"),this.internalInstallFirstTime()):(this.filename in window.r20esDisposeTable&&console.error(`DUPLICATE MODULE FOUND: ${this.filename}`),console.log("Calling install update"),this.internalInstallUpdate()),window.r20esDisposeTable[this.filename]=(()=>{this.dispose()}),window.r20esInstalledModuleTable[this.filename]=this,console.log(`DONE! module ID: ${this.filename}`)},e}(),a.SimpleBase=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.installFirstTime=function(){this.setup()},n.installUpdate=function(){this.setup()},n.setup=function(){},t}(a.Base),a.OnAppLoadBase=function(e){function t(t){var n;return(n=e.call(this,t)||this).setup=n.setup.bind(o(o(n))),n}i(t,e);var n=t.prototype;return n.installFirstTime=function(){window.r20es.isLoading?(this.earlySetup(),window.r20es.onAppLoad.addEventListener(this.setup)):(this.earlySetup(),this.setup())},n.earlySetup=function(){},n.setup=function(){},n.installUpdate=function(){this.installFirstTime()},n.dispose=function(){window.r20es.onAppLoad.removeEventListener(this.setup)},t}(a.Base),a.canInstall=(e=>window.r20es&&"canInstallModules"in window.r20es&&window.r20es.canInstallModules),a.getModule=function(e){return"r20esInstalledModuleTable"in window?window.r20esInstalledModuleTable[e]:null},a.getModuleById=function(e){return"r20esInstalledModuleTable"in window?a.getModule(window.r20es.hooks[e].filename):null}},5:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(7);!function(e){var t;function n(){return window.d20.engine.unselect()}function r(e){window.d20.engine.select(e)}function i(){return window.currentPlayer}function a(){return window.currentEditingLayer}function c(){try{var e=window.d20.Campaign.attributes.jukeboxfolder;return JSON.parse(e||"[]")}catch(e){console.error("[getJukeboxFileStructure] failed to get fs due to exception",e)}return[]}function s(e){return window.Jukebox.playlist.get(e)}function l(){return window.d20.Campaign.activePage()}function u(){return window.d20.engine.canvas.getObjects()}function d(t){for(var n=0,r=u();n<r.length;n++){var o=r[n],i=e.try_get_canvas_object_model(o);if(i&&i.get("id")===t)return o}return null}function f(e,t,n){n?($(document).on("mancerroll:"+t,function(e,r){$(document).off("mancerroll:"+t),n(e,r)}),window.d20.textchat.doChatInput(e,t)):window.d20.textchat.doChatInput(e)}function p(e){window.d20.textchat.incoming(!1,{who:"system",type:"system",content:e})}function h(){window.d20.engine.redrawScreenNextTick(!1)}!function(e){e[e.NumericAscending=0]="NumericAscending",e[e.NumericDescending=1]="NumericDescending",e[e.Alphabetical=2]="Alphabetical",e[e.AlphabeticalDescending=3]="AlphabeticalDescending",e[e.Card=4]="Card"}(t=e.InitiativeOrdering||(e.InitiativeOrdering={})),function(e){e.Map="map",e.PlayerTokens="objects",e.GMTokens="gmlayer",e.Lighting="walls",e.B20Foreground="foreground",e.B20Weather="weather"}(e.CanvasLayer||(e.CanvasLayer={})),e.setBackgroundStyle=function(e){window.d20.engine.backgroundColor=e},e.setupImageDropTarget=function(e,t,n){var r={model:{save:t},updateModel:n};window.d20.utils.setupAvatar(e,r)},e.getCanvasMousePos=function(){return window.d20.engine.mousePos.slice()},e.onInitiativeChange=function(t){return new o.EventSubscriber("change:turnorder",t,function(){return e.getInitiativeWindow().model})},e.setCanvasObjectLocation=function(t,n,r){var o=e.try_get_canvas_object_model(t);o&&o.save({top:r,left:n})},e.getBlob=function(e,t,n){return void 0===n&&(n=5e3),new Promise(function(r,o){e._getLatestBlob(t,r),setTimeout(o,n)})},e.getCampaign=function(){return window.Campaign},e.canEditCharacter=function(t){var n=t.attributes.controlledby;return!!e.isGM()||(!!n.includes("all")||!!n.includes(e.getCurrentPlayer().id))},e.getHandout=function(e){return window.Campaign.handouts.get(e)},e.createCharacter=function(e){return window.Campaign.characters.create(e)},e.setCanvasObjectDimensions=function(t,n,r){var o=e.try_get_canvas_object_model(t);o&&o.save({width:n,height:r})},e.getCharacter=function(e){return window.Campaign.characters.get(e)},e.getAllCharacters=function(){return window.Campaign.characters.models},e.getAllPages=function(){return window.Campaign.pages.models},e.createRollableTable=function(e){return window.d20.Campaign.rollabletables.create(e)},e.getRollableTable=function(e){return window.d20.Campaign.rollabletables.get(e)},e.getSelectedTokens=function(){return window.d20.engine.selected()},e.unselectTokens=n,e.addTokenToSelection=r,e.selectToken=function(e){n(),r(e)},e.hideTokenRadialMenu=function(){window.d20.token_editor.removeRadialMenu()},e.hideTokenContextMenu=function(){window.d20.token_editor.closeContextMenu()},e.getCurrentPlayer=i,e.getCanvasZoom=function(){return window.d20.engine.canvasZoom},e.getCanvasWidth=function(){return window.d20.engine.canvas.width},e.getCanvasHeight=function(){return window.d20.engine.canvas.height},e.getCanvasOffsetX=function(){return window.d20.engine.currentCanvasOffset[0]},e.getCanvasOffsetY=function(){return window.d20.engine.currentCanvasOffset[1]},e.getPageById=function(e){return window.Campaign.pages.get(e)},e.isGM=function(){return window.is_gm},e.getCurrentLayer=a,e.generateUUID=function(){return window.generateUUID()},e.getCurrentToolName=function(){return window.d20.engine.mode},e.advanceInitiative=function(){window.d20.Campaign.initiativewindow.nextTurn()},e.addTokenToInitiative=function(e){window.d20.Campaign.initiativewindow.addTokenToList(e)},e.addCustomItemToInitiative=function(e,t){window.d20.Campaign.initiativewindow.addTokenToList("-1",e,t)},e.rerenderMacroBar=function(){window.d20.player_settings.refreshMacroBar()},e.rerenderJournalMacros=function(){window.d20.player_settings.refreshRollsList()},e.orderInitiativeBy=function(e){var n,r=((n={})[t.NumericAscending]=".sortlist_numeric",n[t.NumericDescending]=".sortlist_numericdesc",n[t.Alphabetical]=".sortlist_alpha",n[t.AlphabeticalDescending]=".sortlist_alphadesc",n[t.Card]=".sortlist_card",n);if(e in r){var o=r[e];$("#initiativewindow_settings").dialog({modal:!1,title:"Turn Order Settings",beforeClose:function(){}}),$(o).click()}else console.error("Invalid initiative ordering: "+e)},e.getInitiativeWindow=function(){return window.d20.Campaign.initiativewindow},e.getJukeboxFileStructure=c,e.setJukeboxFileStructure=function(t){e.getCampaign().save({jukeboxfolder:JSON.stringify(t)})},e.createPlaylist=function(e){return window.d20.jukebox.addFolderToFolderStructure(e)},e.addTrackToPlaylist=function(e,t){return window.d20.jukebox.addItemToFolderStructure(e,t)},e.getSongById=s,e.getJukeboxPlaylists=function(){for(var e=[],t=0,n=c();t<n.length;t++){var r=n[t];if("string"!=typeof r){for(var o=r,i={id:o.id,name:o.n,mode:o.s,songs:[]},a=0,l=o.i;a<l.length;a++){var u=l[a],d=s(u);d?i.songs.push(d):console.warn("Tried to get song id "+u+" but the query returned a falsy value. Skipping")}e.push(i)}}return e},e.playAudio=function(e,t){window.Jukebox.soundObjs[e]=window.soundManager.createSound({id:e,url:t})},e.createSong=function(e){return window.Jukebox.playlist.create(e)},e.makePlaylistStructure=function(e,t,n){return{id:window.generateUUID(),n:e,s:t,i:n||[]}},e.getInitiativeData=function(){return window.d20.Campaign.initiativewindow.cleanList()},e.setInitiativeData=function(e){window.d20.Campaign.initiativewindow.model.save({turnorder:JSON.stringify(e)})},e.getCurrentPage=l,e.getCurrentPageTokens=u,e.doesTokenContainMouse=function(e,t){return window.d20.engine.canvas.containsPoint(e,t)},e.getCurrentPageTokenByUUID=d,e.try_get_canvas_object_model=function(e){return e._model?e._model:e.model?e.model:null},e.isUsing5EOGLSheet=function(){try{return window.d20.journal.customSheets.workerScripts[0].includes("5th Edition OGL by Roll20")}catch(e){return!1}},e.moveCameraToTokenByUUID=function(e){if(e){var t=d(e);if(t){var n=$("#editor-wrapper")[0];n.scrollTop=Math.floor(t.top*window.d20.engine.canvasZoom)-Math.floor(window.d20.engine.canvasHeight/2)+125*window.d20.engine.canvasZoom,n.scrollLeft=Math.floor(t.left*window.d20.engine.canvasZoom)-Math.floor(window.d20.engine.canvasWidth/2)+125*window.d20.engine.canvasZoom}}},e.primitiveSay=function(e,t){window.d20.textchat.doChatInput(e,t)},e.say=f,e.sayToSelf=function(t,n){var r='/w "'+i().get("displayname")+'" '+t;n?f(r,e.generateUUID(),n):f(r)},e.saySystemRaw=p,e.saySystem=function(e){p('<span style="background: rgba(6,26,45,255);\n    color: whitesmoke;\n    border: none;\n    display: inline-block;\n    padding: 8px;\n    margin: -15px -5px -7px -45px;    \n    "\n>\n'+e+"\n</span>\n        ")},e.ping=function(e,t,n,r,o){n=n||i().id,window.d20.engine.pings[n]={left:e,top:t,radius:-5,player:n,pageid:r||l().id,currentLayer:o||a()},window.d20.engine.pinging={downx:e,downy:t},h()},e.getFabric=function(){return window.exports.fabric},e.renderAll=h,e.setGMLayerOpacity=function(e){window.d20.engine.gm_layer_opacity=e},e.hasBetteR20=function(){return void 0!==window.d20plus},e.wipeObjectStorage=function(e){for(var t=e.length,n=0;n<t;n++){var r=e.length-1;if(0>r)break;var o=e.models[r];if(!o||void 0===o)break;o.destroy()}e.length<0&&console.error("FAILED TO WIPE OBJECT STORAGE!")},e.doBulkRoll=function(t,n,r,o,i){e.unselectTokens();var a=function(t){if(e.selectToken(t),i){var r=i(t);r&&e.say(n,r.id,r.callback)}else e.say(n)},c=function(){if(e.hideTokenRadialMenu(),e.hideTokenContextMenu(),o)for(var n=0,r=t;n<r.length;n++){var i=r[n];e.addTokenToSelection(i)}};if(0===r){for(var s=0,l=t;s<l.length;s++){var u=l[s];a(u)}c()}else for(var d=r,f=function(e){setTimeout(function(){a(t[e]),e+1===t.length&&c()},d),d+=r},p=0;p<t.length;p++)f(p)}}(r||(r={})),t.R20=r},6:function(e,t,n){"use strict";t.__esModule=!0;var r=n(8);t.copy=function(e,t){var n=Object.assign({},e);return t&&(n=Object.assign(n,t)),n};var o=function(e){if("currentTransform"in e)return e.currentTransform;if("getTransform"in e)return e.getTransform();if(e.mozCurrentTransform){var t=e.mozCurrentTransform;return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}};t.getTransform=o;t.getRotation=function(e){var t=o(e),n=Math.atan2(t.b,t.a);return n<0&&(n+=2*Math.PI),n};t.findByIdAndRemove=function(e){var t=document.getElementById(e);t&&t.remove()};t.mapObj=function(e,t){return Object.keys(e).reduce(function(n,r){var o=t(e[r],r);return void 0!==o&&null!==o&&n.push(o),n},[])};t.safeCall=function(e){try{e()}catch(e){console.error(e)}};t.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};t.replaceAll=function(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)};t.safeParseJson=function(e){try{return JSON.parse(e)}catch(e){alert("File is not a valid JSON file.")}return null};t.readFile=function(e){return new Promise(function(t,n){if(e){var r=new FileReader;r.readAsText(e),r.onload=function(e){t(e.target.result)}}else n("No file given.")})};var i=function(){return chrome||browser};t.getBrowser=i;t.injectScript=function(e){console.log("Injecting "+e);var t=document.createElement("script");t.async=!1,t.src=i().extension.getURL(e),t.onload=function(){t.remove()},document.head.appendChild(t)};t.strIsNullOrEmpty=function(e){return null===e||void 0===e||e.length<=0||e.trim().length<=0};t.createCSSElement=function(e,t){var n=document.createElement("style");return n.innerHTML=e,n.id=t,n};t.getExtUrlFromPage=function(e,t){var n=void 0===t||null===t?1e3:t;return new Promise(function(t,o){try{var i=!1,a=function(){window.removeEventListener("message",s)},c=window.generateUUID(),s=function(e){e.origin===r.Config.appUrl&&e.data.r20esGivesResourceUrl&&e.data.r20esGivesResourceUrl.id===c&&(i=!0,a(),t(e.data.r20esGivesResourceUrl.url))};window.addEventListener("message",s);var l={resource:e,id:c};window.postMessage({r20esWantsResourceUrl:l},r.Config.appUrl),setTimeout(function(){try{i||(a(),o("Timed out after "+n+"ms"))}catch(e){o(e)}},n)}catch(e){o(e)}})}},7:function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t,n){this._isSubscribed=!1,this._name=e,this._callback=t,this._targetGetter=n}return e.subscribe=function(t,n,r){var o=new e(t,n,r);return o.subscribe(),o},e.prototype.subscribe=function(){if(!this._isSubscribed){var e=this._targetGetter();"on"in e?e.on(this._name,this._callback):e.addEventListener(this._name,this._callback),this._isSubscribed=!0}},e.prototype.unsubscribe=function(){if(this._isSubscribed){var e=this._targetGetter();"off"in e?e.off(this._name,this._callback):e.removeEventListener(this._name,this._callback),this._isSubscribed=!1}},e}();t.EventSubscriber=r},73:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r=n(e),o=n(t);return r<o?-1:r>o?1:0}},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;let r={};t.Config=r,r.appUrl="https://app.roll20.net",r.websiteFeatureUrlTemplate="https://ssstormy.github.io/roll20-enhancement-suite/features#",r.website="https://ssstormy.github.io/roll20-enhancement-suite/",r.discordInvite="https://discord.gg/pKxxvuM",r.contributeUrl="https://ssstormy.github.io/roll20-enhancement-suite/contribute.html"},90:function(e,t,n){"use strict";t.__esModule=!0,function(e){e.NoFolder="No foldering",e.SmallFolders="Small folders",e.UberFolder="Uber folder"}(t.FolderingMethod||(t.FolderingMethod={}))}});