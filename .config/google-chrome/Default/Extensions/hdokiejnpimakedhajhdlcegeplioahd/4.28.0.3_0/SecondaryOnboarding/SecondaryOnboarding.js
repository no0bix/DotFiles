var SecondaryOnboardingCard=function(){function e(e,t){this.data=e,this.setCompleted(t)}return e.prototype.draw=function(){var e=LPTools.createElement("div",{id:this.data.id,class:"card"},"");e.appendChild(LPTools.createElement("img",{id:this.data.id+"-icon",class:"card-icon",src:this.data.icon},"")),e.appendChild(LPTools.createElement("div",{id:this.data.id+"-header",class:"card-header"},Strings.translateString(this.data.header))),e.appendChild(LPTools.createElement("div",{id:this.data.id+"-text",class:"card-text"},Strings.translateString(this.data.bodyText)));var t=LPTools.createElement("button",{id:this.data.id+"-cta",class:"card-button btn-base btn-small btn-primary"},Strings.translateString(this.data.buttonText));return t.onclick=this.data.cta,e.appendChild(t),e},e.prototype.drawCompleted=function(){var e=LPTools.createElement("div",{id:this.data.id,class:"cardComplete card"},"");return e.appendChild(LPTools.createElement("img",{id:this.data.id+"-icon-completed",class:"card-completed-icon",src:"images/SecondaryOnboarding/circle-success.png"},"")),e.appendChild(LPTools.createElement("div",{id:this.data.id+"-text-completed",class:"card-completed-header"},Strings.translateString(this.data.completedText))),e},e.prototype.isCompleted=function(){return this.completed},e.prototype.setCompleted=function(e){this.completed=e},e.prototype.getID=function(){return this.data.id},e}(),SecondaryOnboardingContainer=function(){function e(){this.cardWidth=330,this.vaultEl=$("#vault"),this.containerEl=$("#secondaryOnboardingContainer"),this.containerEl.hide()}return e.prototype.init=function(e){this.adjustVaultContentsPositioning(),this.cards=this.createCards(e),this.sortCards(this.cards);var t=LPTools.createElement("div",{id:"secondaryOnboardingHeader",class:"row"},"");t.append(this.createProgressbar()),t.append(this.createToggleButton()),this.containerEl.append(t),this.containerEl.append(this.drawCards(this.cards)),this.showContainer(),this.setCardWidth(this.cards)},e.prototype.adjustVaultContentsPositioning=function(){$("#options").addClass("bottom"),$("#main").addClass("secondary-onboarding-bottom")},e.prototype.createCards=function(e){for(var t=[],r,a=0,o=Object.keys(e);a<o.length;a++){var n=o[a],s=DTO[n],d=e[n].completed;t.push(new SecondaryOnboardingCard(s,d))}return t},e.prototype.createToggleButton=function(){var e=LPTools.createElement("div",{id:"collapseToggleElement",class:"collapseToggleElement col-3 pull-right content-pull-right"},"");return e.appendChild(LPTools.createElement("span",{id:"collapseToggleButton"},"Collapse")),e.appendChild(LPTools.createElement("img",{id:"collapseToggleArrow",src:"images/SecondaryOnboarding/close_arrow.png",alt:"Secondary Onboarding Toggle Arrow"},"")),$(e).click(this.toggleContainer),e},e.prototype.createProgressbar=function(){var e=LPTools.createElement("div",{id:"progressBar",class:"col-9"},"");return e.appendChild(LPTools.createElement("span",{id:"progressBarText"},Strings.translateString("Get started with LastPass  "))),e.appendChild(LPTools.createElement("span",{id:"cardProgressCount"},"")),e.appendChild(LPTools.createElement("span",{id:"cardProgressBar"},"")),e},e.prototype.showContainer=function(){this.vaultEl.addClass("secondary-onboarding-overrides"),this.containerEl.addClass("secondary-onboarding lp-grid container gutter-sm leftOfAd right"),this.containerEl.show()},e.prototype.sortCards=function(e){e.sort(function(e,t){return e.isCompleted()&&!t.isCompleted()?1:-1})},e.prototype.drawCards=function(e){var t=this,r=LPTools.createElement("div",{id:"carousel",class:"carousel content row"},""),a=LPTools.createElement("div",{id:"cardsCarousel",class:"cards-carousel"},""),o=LPTools.createElement("div",{id:"cards",class:"cards"},"");a.appendChild(o),$(o).width(this.cardWidth*e.length);for(var n=0,s=e;n<s.length;n++){var d=s[n];d.isCompleted()?o.appendChild(d.drawCompleted()):o.appendChild(d.draw())}var i=LPTools.createElement("div",{id:"prev",class:"arrow arrow-left"},"");i.onclick=function(){return t.scrollReverse(t.cardWidth)},r.appendChild(i),i.appendChild(LPTools.createElement("img",{id:"prevArrow",class:"arrow-img",src:"images/SecondaryOnboarding/arrow_left.png"},"")),r.appendChild(a);var c=LPTools.createElement("div",{id:"next",class:"arrow arrow-right"},"");return c.onclick=function(){return t.scrollNext(t.cardWidth)},c.appendChild(LPTools.createElement("img",{id:"nextArrow",class:"arrow-img",src:"images/SecondaryOnboarding/arrow_right.png"},"")),r.appendChild(c),r},e.prototype.setCardWidth=function(e){if(e.length>0){var t=""+e[0].getID();this.cardWidth=$("#"+t).outerWidth()+parseInt($("#"+t).css("margin-left"))+parseInt($("#"+t).css("margin-right"))}},e.prototype.scrollNext=function(e){var t=$("#cards").outerWidth()-$("#cardsCarousel").outerWidth(),r;Math.abs(parseInt($("#cards").css("left")))<t&&$("#cards").animate({left:"-="+e},"fast")},e.prototype.scrollReverse=function(e){var t;parseInt($("#cards").css("left"))<0&&$("#cards").animate({left:"+="+e},"fast")},e.prototype.toggleContainer=function(){var e;$("#vault").toggleClass("collapsed"),$("#vault").hasClass("collapsed")?($("#carousel").hide(),$("#collapseToggleButton").text("Expand"),$("#collapseToggleArrow").attr("src","../images/SecondaryOnboarding/open_arrow.png"),bg.sendLpImprove("secondary_onboarding_container_collapsed")):($("#carousel").show(),$("#collapseToggleButton").text("Collapse"),$("#collapseToggleArrow").attr("src","../images/SecondaryOnboarding/close_arrow.png"))},e}(),DTO={vaultTour:{cta:function(){alert("Vault Tour")},checkComplete:function(){return!1},header:"New around here? Take the tour",bodyText:"Take a guided tour of your LastPass vault and see how LastPass keeps you secure.",completedText:"Vault tour complete!",buttonText:"Take the tour",icon:"images/SecondaryOnboarding/mid-safe-color.svg",id:"vaultTourCard"},addAPasswordCard:{cta:function(){alert("Add a Password Card")},checkComplete:function(){return!1},header:"Add a password now, save time later",bodyText:"Add your login information for your favorite website and save time on your next visit.",completedText:"First password saved!",buttonText:"Add a password",icon:"images/SecondaryOnboarding/mid-lock-color.svg",id:"passwordCard"},getMobileApp:{cta:function(){alert("Get Mobile App")},checkComplete:function(){return!1},header:"Take LastPass everywhere",bodyText:"Download the LastPass app for Android or iOS to access your passwords anywhere",completedText:"Mobile app installed!",buttonText:"Get LastPass mobile app",icon:"images/SecondaryOnboarding/mid-phone-color.svg",id:"mobileAppCard"},enableMFA:{cta:function(){Topics.get(Topics.EDIT_SETTINGS).publish({source:"sidebar",defaulttab:"settings_multifactor"})},checkComplete:function(){return bg.get("g_2fa_inprocess")},header:"Enable Multi-Factor Authentication",bodyText:"Give your account an additional layer of security by setting up multi-factor authentication",completedText:"Multi-Factor Auth Enabled!",buttonText:"Set up Multi-Factor Auth",icon:"images/SecondaryOnboarding/mid-spy-color.svg",id:"mfaCard"},saveAPayment:{cta:function(){alert("Save a Payment")},checkComplete:function(){return!1},header:"Save payment cards and shop smart",bodyText:"Keep your payment card information ready and secure of bill pay and online shopping",completedText:"Payment card saved!",buttonText:"Save a payment card",icon:"images/SecondaryOnboarding/mid-card-color.svg",id:"paymentCard"}},SecondaryOnboardingManager=function(){function e(){this.preferences=new SecondaryOnboardingPreferences,this.container=new SecondaryOnboardingContainer,this.progress=new SecondaryOnboardingProgress}return e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var e=this.preferences.retrieve();this.updateCompletedCards(e),this.preferences.save(e),this.container.init(e.cards),this.updateProgressBar(e)},e.prototype.updateCompletedCards=function(e){for(var t,r=0,a=Object.keys(e.cards);r<a.length;r++){var o=a[r];DTO[o].checkComplete()&&!e.cards[o].completed&&bg.sendLpImprove("secondary_onboarding_card_complete",{cardname:o}),e.cards[o].completed|=DTO[o].checkComplete()}},e.prototype.updateProgressBar=function(e){this.progress.setProgress(e),this.progress.showProgressCounter(e),this.progress.showProgressBarCompletion()},e}(),SecondaryOnboardingPreferences=function(){function e(){this.defaultSecondaryOnboardingPref={expanded:!0,cards:{vaultTour:{completed:!1},addAPasswordCard:{completed:!1},getMobileApp:{completed:!1},enableMFA:{completed:!1},saveAPayment:{completed:!1}}}}return e.prototype.save=function(e){LPProxy.setPreferences("SecondaryOnboarding",JSON.stringify(e))},e.prototype.retrieve=function(){var e=LPProxy.getPreference("SecondaryOnboarding");return e&&"null"!==e&&"undefined"!==e?JSON.parse(e):this.defaultSecondaryOnboardingPref},e}(),SecondaryOnboardingProgress=function(){function e(){this.completedCounter=0}return e.prototype.showProgressCounter=function(e){var t=Object.keys(e.cards).length;$("#cardProgressCount").text("("+this.completedCounter+"/"+t+")")},e.prototype.showProgressBarCompletion=function(){$("#cardProgressBar").remove(".cardCompletionPercentage");var e=LPTools.createElement("span",{class:"cardCompletionPercentage"},"");$(e).css("width",20*this.completedCounter+"px"),$("#cardProgressBar").append(e)},e.prototype.setProgress=function(e){var t=e.cards;for(var r in t){var a;t[r].completed&&this.completedCounter++}},e}();
//# sourceMappingURL=sourcemaps/SecondaryOnboarding/SecondaryOnboarding.js.map
